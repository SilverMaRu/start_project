{"version":3,"sources":["InputMoveHorizontal.js"],"names":["cc","Class","extends","Component","properties","maxSpeed","accel","_currentSpeed","onLoad","start","update","dt","getCurrentSpeed","node","x","onDestroy","getAccelDirection","accelDir","isKeyA","input","isKey","macro","KEY","a","isKeyD","d","Math","sign","resultSpeed","clamp","abs"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAC,kBAAU,CAhBF;AAiBRC,eAAO,CAjBC;AAkBRC,uBAAe;AAlBP,KAHP;;AAwBL;;AAEAC,UA1BK,oBA0BK;AACN,aAAKD,aAAL,GAAqB,CAArB;AACH,KA5BI;AA8BLE,SA9BK,mBA8BI,CACR,CA/BI;AAiCLC,UAjCK,kBAiCGC,EAjCH,EAiCO;AACR,aAAKJ,aAAL,GAAqB,KAAKK,eAAL,CAAqBD,EAArB,CAArB;AACA,aAAKE,IAAL,CAAUC,CAAV,IAAe,KAAKP,aAAL,GAAqBI,EAApC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH,KAjDI;AAmDLI,aAnDK,uBAmDM,CACV,CApDI;AAsDLC,qBAtDK,+BAsDc;AACf,YAAIC,WAAW,CAAf;AACA,YAAIC,SAASC,MAAMC,KAAN,CAAYpB,GAAGqB,KAAH,CAASC,GAAT,CAAaC,CAAzB,CAAb;AACA,YAAIC,SAASL,MAAMC,KAAN,CAAYpB,GAAGqB,KAAH,CAASC,GAAT,CAAaG,CAAzB,CAAb;;AAEA,YAAGD,MAAH,EAAU;AACNP,uBAAW,CAAX;AACH,SAFD,MAEM,IAAGC,MAAH,EAAU;AACZD,uBAAW,CAAC,CAAZ;AACH,SAFK,MAEA,IAAG,CAACC,MAAD,IAAW,CAACM,MAAf,EAAsB;AACxBP,uBAAW,CAACS,KAAKC,IAAL,CAAU,KAAKpB,aAAf,CAAZ;AACH;;AAED,eAAOU,QAAP;AACH,KApEI;AAsELL,mBAtEK,2BAsEWD,EAtEX,EAsEc;AACf,YAAIiB,cAAc,KAAKrB,aAAvB;AACAqB,uBAAe,KAAKtB,KAAL,GAAa,KAAKU,iBAAL,EAAb,GAAwCL,EAAvD;AACAiB,sBAAcF,KAAKC,IAAL,CAAUC,WAAV,IAAyBF,KAAKG,KAAL,CAAWH,KAAKI,GAAL,CAASF,WAAT,CAAX,EAAkC,CAAlC,EAAqC,KAAKvB,QAA1C,CAAvC;AACA,eAAOuB,WAAP;AACH;AA3EI,CAAT","file":"InputMoveHorizontal.js","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n        maxSpeed: 0,\r\n        accel: 0,\r\n        _currentSpeed: 0,\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        this._currentSpeed = 0;\r\n    },\r\n\r\n    start () {\r\n    },\r\n\r\n    update (dt) {\r\n        this._currentSpeed = this.getCurrentSpeed(dt);\r\n        this.node.x += this._currentSpeed * dt;\r\n        // if(input.isKey(65)){\r\n        //     console.log(\"Key A\");\r\n        // }\r\n        // if(input.isKeyUp(65)){\r\n        //     console.log(\"KeyUp A\");\r\n        // }\r\n        // if(input.isKey(68)){\r\n        //     console.log(\"Key D\");\r\n        // }\r\n        // if(input.isKeyUp(68)){\r\n        //     console.log(\"KeyUp D\");\r\n        // }\r\n        // this.node.emit(\"testEvent\");\r\n    },\r\n\r\n    onDestroy(){\r\n    },\r\n\r\n    getAccelDirection(){\r\n        var accelDir = 0;\r\n        var isKeyA = input.isKey(cc.macro.KEY.a);\r\n        var isKeyD = input.isKey(cc.macro.KEY.d);\r\n\r\n        if(isKeyD){\r\n            accelDir = 1;\r\n        }else if(isKeyA){\r\n            accelDir = -1;\r\n        }else if(!isKeyA && !isKeyD){\r\n            accelDir = -Math.sign(this._currentSpeed);\r\n        }\r\n\r\n        return accelDir;\r\n    },\r\n\r\n    getCurrentSpeed(dt){\r\n        var resultSpeed = this._currentSpeed;\r\n        resultSpeed += this.accel * this.getAccelDirection() * dt;\r\n        resultSpeed = Math.sign(resultSpeed) * Math.clamp(Math.abs(resultSpeed), 0, this.maxSpeed);\r\n        return resultSpeed;\r\n    }\r\n});\r\n"]}